(window.yoastWebpackJsonp=window.yoastWebpackJsonp||[]).push([[15],{1:function(e,t,n){e.exports=n(21)()},16:function(e,t){e.exports=window.yoast.styleGuide},21:function(e,t,n){"use strict";var r=n(22),s=n(23),a=n(24);e.exports=function(){function e(e,t,n,r,i,o){o!==a&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n}},22:function(e,t,n){"use strict";function r(e){return function(){return e}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},23:function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,s,a){var c,u,d;if(!e)throw void 0===t?c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(u=[n,r,i,o,s,a],d=0,(c=new Error(t.replace(/%s/g,function(){return u[d++]}))).name="Invariant Violation"),c.framesToPop=1,c}},24:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3:function(e,t){e.exports=window.wp.i18n},4:function(e,t){e.exports=window.wp.element},5:function(e,t){e.exports=window.yoast.componentsNew},549:function(e,t,n){"use strict";var r=n(4),i=(n=n(550))&&n.__esModule?n:{default:n},o={},s={};window.yoast=window.yoast||{},window.yoast.indexing=window.yoast.indexing||{};var a=void 0;function c(){(a=a||document.getElementById("yoast-seo-indexing-action"))&&(0,r.render)(wp.element.createElement(i.default,{preIndexingActions:o,indexingActions:s}),a)}window.yoast.indexing.registerPreIndexingAction=function(e,t){o[e]=t,c()},window.yoast.indexing.registerIndexingAction=function(e,t){s[e]=t,c()},window.yoast.indexation=window.yoast.indexing,window.yoast.indexation.registerPreIndexationAction=function(e,t){console.warn("Deprecated since 15.1. Use 'window.yoast.indexing.registerPreIndexingAction' instead."),window.yoast.indexing.registerPreIndexingAction(e,t)},window.yoast.indexation.registerIndexationAction=function(e,t){console.warn("Deprecated since 15.1. Use 'window.yoast.indexing.registerIndexingAction' instead."),window.yoast.indexing.registerIndexingAction(e,t)},jQuery(function(){c()})},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Indexation=void 0;var r,i=function(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e},o=n(4),s=n(3),a=n(5),c=n(16),r=(r=n(1))&&r.__esModule?r:{default:r},u=n(551);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return function(){var a=e.apply(this,arguments);return new Promise(function(o,s){return function t(e,n){try{var r=a[e](n),i=r.value}catch(e){return void s(e)}if(!r.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}var l,f,h,m,g,w,x={IDLE:"idle",IN_PROGRESS:"in_progress",ERRORED:"errored",COMPLETED:"completed"},i=t.Indexation=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,o.Component),i(y,[{key:"doIndexingRequest",value:(w=p(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"X-WP-Nonce":n}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(i=e.sent,r.ok){e.next=8;break}throw new Error(i.message);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"doPreIndexingAction",value:(g=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof this.props.preIndexingActions[t])return e.next=3,this.props.preIndexingActions[t](this.settings);e.next=3;break;case 3:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"doPostIndexingAction",value:(m=p(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof this.props.indexingActions[t])return e.next=3,this.props.indexingActions[t](n.objects,this.settings);e.next=3;break;case 3:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)})},{key:"doIndexing",value:(h=p(regeneratorRuntime.mark(function e(n){var r,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.settings.restApi.root+this.settings.restApi.endpoints[n];case 1:if(this.isState(x.IN_PROGRESS)&&!1!==r)return e.prev=2,e.delegateYield(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.doPreIndexingAction(n);case 2:return e.next=4,i.doIndexingRequest(r,i.settings.restApi.nonce);case 4:return t=e.sent,e.next=7,i.doPostIndexingAction(n,t);case 7:i.setState(function(e){return{processed:e.processed+t.objects.length,firstTime:!1}}),r=t.next_url;case 9:case"end":return e.stop()}},e,i)})(),"t0",4);e.next=11;break;case 4:e.next=9;break;case 6:e.prev=6,e.t1=e.catch(2),this.setState({state:x.ERRORED,firstTime:!1});case 9:e.next=1;break;case 11:case"end":return e.stop()}},e,this,[[2,6]])})),function(e){return h.apply(this,arguments)})},{key:"index",value:(f=p(regeneratorRuntime.mark(function e(){var t,n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!(t=!0),r=void 0,e.prev=3,i=Object.keys(this.settings.restApi.endpoints)[Symbol.iterator]();case 5:if(t=(o=i.next()).done){e.next=12;break}return o=o.value,e.next=9,this.doIndexing(o);case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),n=!0,r=e.t0;case 18:e.prev=18,e.prev=19,!t&&i.return&&i.return();case 21:if(e.prev=21,n)throw r;e.next=24;break;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.isState(x.ERRORED)||this.isState(x.IDLE)||this.completeIndexing();case 27:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])})),function(){return f.apply(this,arguments)})},{key:"startIndexing",value:(l=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({processed:0,state:x.IN_PROGRESS},this.index);case 1:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"completeIndexing",value:function(){this.setState({state:x.COMPLETED})}},{key:"stopIndexing",value:function(){this.setState(function(e){return{state:x.IDLE,processed:0,amount:e.amount-e.processed}})}},{key:"componentDidMount",value:function(){var e;this.settings.disabled||"true"!==new URLSearchParams(window.location.search).get("start-indexation")||(e=(0,u.removeSearchParam)(window.location.href,"start-indexation"),(0,u.addHistoryState)(null,document.title,e),this.startIndexing())}},{key:"isState",value:function(e){return this.state.state===e}},{key:"renderFirstIndexationNotice",value:function(){return wp.element.createElement(a.Alert,{type:"info"},(0,s.__)("This feature includes and replaces the Text Link Counter and Internal Linking Analysis","wordpress-seo"))}},{key:"renderStartButton",value:function(){return wp.element.createElement(a.NewButton,{variant:"primary",onClick:this.startIndexing},(0,s.__)("Start SEO data optimization","wordpress-seo"))}},{key:"renderStopButton",value:function(){return wp.element.createElement(a.NewButton,{variant:"secondary",onClick:this.stopIndexing},(0,s.__)("Stop SEO data optimization","wordpress-seo"))}},{key:"renderDisabledTool",value:function(){return wp.element.createElement(o.Fragment,null,wp.element.createElement("p",null,wp.element.createElement(a.NewButton,{variant:"secondary",disabled:!0},(0,s.__)("Start SEO data optimization","wordpress-seo"))),wp.element.createElement(a.Alert,{type:"info"},(0,s.__)("SEO data optimization is disabled for non-production environments.","wordpress-seo")))}},{key:"renderProgressBar",value:function(){return wp.element.createElement(o.Fragment,null,wp.element.createElement(a.ProgressBar,{style:{height:"16px",margin:"8px 0"},progressColor:c.colors.$color_pink_dark,max:parseInt(this.state.amount,10),value:this.state.processed}),wp.element.createElement("p",{style:{color:c.colors.$palette_grey_text}},(0,s.__)("Optimizing SEO data... This may take a while.","wordpress-seo")))}},{key:"renderErrorAlert",value:function(){return wp.element.createElement(a.Alert,{type:"error"},(0,s.__)("Oops, something has gone wrong and we couldn't complete the optimization of your SEO data. Please click the button again to re-start the process.","wordpress-seo"))}},{key:"renderTool",value:function(){return wp.element.createElement(o.Fragment,null,this.isState(x.IN_PROGRESS)&&this.renderProgressBar(),this.isState(x.ERRORED)&&this.renderErrorAlert(),this.isState(x.IDLE)&&this.state.firstTime&&this.renderFirstIndexationNotice(),this.isState(x.IN_PROGRESS)?this.renderStopButton():this.renderStartButton())}},{key:"render",value:function(){return this.settings.disabled?this.renderDisabledTool():this.isState(x.COMPLETED)||0===this.state.amount?wp.element.createElement(a.Alert,{type:"success"},(0,s.__)("SEO data optimization complete","wordpress-seo")):this.renderTool()}}]),y);function y(e){!function(e){if(!(e instanceof y))throw new TypeError("Cannot call a class as a function")}(this);e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,e));return e.settings=yoastIndexingData,e.state={state:x.IDLE,processed:0,amount:parseInt(e.settings.amount,10),firstTime:"1"===e.settings.firstTime},e.startIndexing=e.startIndexing.bind(e),e.stopIndexing=e.stopIndexing.bind(e),e}i.propTypes={indexingActions:r.default.object,preIndexingActions:r.default.object},i.defaultProps={indexingActions:{},preIndexingActions:{}},t.default=i},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSearchParam=function(e,t){e=new URL(e);return e.searchParams.delete(t),e.href},t.addHistoryState=function(e,t,n){window.history.pushState(e,t,n)}}},[[549,0]]]);